#include <stdio.h>
#include <stdint.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>

#define DELTA_T 1

#define START_N 900

// float y[] = {0, -1, -3, -1.2, 0.1, 1.1, 2.05, 3.2, 4.3, 5.5, 7.1, 8, 10, 15, 8, 7, 2, 1.1, 0.25, 1};

float y[] = {-1000.0,-880.1000000000058,-760.4000000000015,-640.9000000000015,-521.5999999999985,-402.5,-283.6000000000058,-164.90000000000146,-46.400000000001455,71.90000000000146,
190.0,307.8999999999942,425.59999999999854,543.0999999999985,660.4000000000015,777.5,894.3999999999942,1011.0999999999985,1127.5999999999985,1243.9000000000015,
1360.0,1475.8999999999942,1591.5999999999985,1707.0999999999985,1822.4000000000015,1937.5,2052.399999999994,2167.0999999999985,2281.5999999999985,2395.899999999998,
2510.0,2623.899999999998,2737.5999999999985,2851.0999999999985,2964.399999999998,3077.5,3190.399999999998,3303.0999999999985,3415.5999999999985,3527.899999999998,
3640.0,3751.899999999998,3863.5999999999985,3975.0999999999985,4086.399999999998,4197.5,4308.399999999998,4419.0999999999985,4529.5999999999985,4639.899999999998,
4750.0,4859.899999999998,4969.5999999999985,5079.0999999999985,5188.399999999998,5297.5,5406.399999999998,5515.0999999999985,5623.5999999999985,5731.899999999998,
5840.0,5947.899999999998,6055.5999999999985,6163.0999999999985,6270.399999999998,6377.5,6484.399999999998,6591.0999999999985,6697.5999999999985,6803.899999999998,
6910.0,7015.899999999998,7121.5999999999985,7227.0999999999985,7332.399999999998,7437.5,7542.399999999998,7647.0999999999985,7751.5999999999985,7855.899999999998,
7960.0,8063.899999999998,8167.5999999999985,8271.099999999999,8374.399999999998,8477.5,8580.399999999998,8683.099999999999,8785.599999999999,8887.899999999998,
8990.0,9091.899999999998,9193.599999999999,9295.099999999999,9396.399999999998,9497.5,9598.399999999998,9699.099999999999,9799.599999999999,9899.899999999998,
10000.0,10099.899999999998,10199.599999999999,10299.099999999999,10398.399999999998,10497.5,10596.399999999998,10695.099999999999,10793.599999999999,10891.899999999998,
10990.0,11087.899999999998,11185.599999999999,11283.099999999999,11380.399999999998,11477.5,11574.399999999998,11671.099999999999,11767.599999999999,11863.899999999998,
11960.0,12055.899999999998,12151.599999999999,12247.099999999999,12342.399999999998,12437.5,12532.399999999998,12627.099999999999,12721.599999999999,12815.899999999998,
12910.0,13003.899999999998,13097.599999999999,13191.099999999999,13284.399999999998,13377.5,13470.399999999998,13563.099999999999,13655.599999999999,13747.899999999998,
13840.0,13931.899999999998,14023.599999999999,14115.099999999999,14206.399999999998,14297.5,14388.399999999998,14479.099999999999,14569.599999999999,14659.899999999998,
14750.0,14839.899999999998,14929.599999999999,15019.099999999999,15108.399999999998,15197.5,15286.399999999998,15375.099999999999,15463.599999999999,15551.899999999998,
15640.0,15727.899999999998,15815.599999999999,15903.099999999999,15990.399999999998,16077.5,16164.399999999998,16251.099999999999,16337.599999999999,16423.899999999998,
16510.0,16595.899999999998,16681.6,16767.1,16852.399999999998,16937.5,17022.399999999998,17107.1,17191.6,17275.899999999998,
17360.0,17443.899999999998,17527.6,17611.1,17694.399999999998,17777.5,17860.399999999998,17943.1,18025.6,18107.899999999998,
18190.0,18271.899999999998,18353.6,18435.1,18516.399999999998,18597.5,18678.399999999998,18759.1,18839.6,18919.9,
19000.0,19079.899999999998,19159.6,19239.1,19318.4,19397.5,19476.399999999998,19555.1,19633.6,19711.9,
19790.0,19867.899999999998,19945.6,20023.1,20100.4,20177.5,20254.399999999998,20331.1,20407.6,20483.9,
20560.0,20635.9,20711.6,20787.1,20862.4,20937.5,21012.4,21087.1,21161.6,21235.9,
21310.0,21383.9,21457.6,21531.1,21604.4,21677.5,21750.4,21823.1,21895.6,21967.9,
22040.0,22111.9,22183.6,22255.1,22326.4,22397.5,22468.4,22539.1,22609.6,22679.9,
22750.0,22819.9,22889.6,22959.1,23028.4,23097.5,23166.4,23235.1,23303.6,23371.9,
23440.0,23507.9,23575.6,23643.1,23710.4,23777.5,23844.4,23911.1,23977.6,24043.9,
24110.0,24175.9,24241.6,24307.1,24372.4,24437.5,24502.4,24567.1,24631.6,24695.9,
24760.0,24823.9,24887.6,24951.1,25014.4,25077.5,25140.4,25203.1,25265.6,25327.9,
25390.0,25451.9,25513.6,25575.1,25636.4,25697.5,25758.4,25819.1,25879.6,25939.9,
26000.0,26059.9,26119.6,26179.1,26238.4,26297.5,26356.4,26415.1,26473.6,26531.9,
26590.0,26647.9,26705.6,26763.1,26820.4,26877.5,26934.4,26991.1,27047.6,27103.9,
27160.0,27215.9,27271.6,27327.1,27382.4,27437.5,27492.4,27547.1,27601.6,27655.9,
27710.0,27763.9,27817.6,27871.1,27924.4,27977.5,28030.4,28083.1,28135.6,28187.9,
28240.0,28291.9,28343.6,28395.1,28446.4,28497.5,28548.4,28599.1,28649.6,28699.9,
28750.0,28799.9,28849.6,28899.1,28948.4,28997.5,29046.4,29095.1,29143.6,29191.9,
29240.0,29287.9,29335.6,29383.1,29430.4,29477.5,29524.4,29571.1,29617.6,29663.9,
29710.0,29755.9,29801.6,29847.1,29892.4,29937.5,29982.4,30027.1,30071.6,30115.9,
30160.0,30203.9,30247.6,30291.1,30334.4,30377.5,30420.4,30463.1,30505.6,30547.9,
30590.0,30631.9,30673.6,30715.1,30756.4,30797.5,30838.4,30879.1,30919.6,30959.9,
31000.0,31039.9,31079.6,31119.1,31158.4,31197.5,31236.4,31275.1,31313.6,31351.9,
31390.0,31427.9,31465.6,31503.1,31540.4,31577.5,31614.4,31651.1,31687.6,31723.9,
31760.0,31795.9,31831.6,31867.1,31902.4,31937.5,31972.4,32007.1,32041.6,32075.9,
32110.0,32143.9,32177.6,32211.1,32244.4,32277.5,32310.4,32343.1,32375.6,32407.9,
32440.0,32471.9,32503.6,32535.1,32566.4,32597.5,32628.4,32659.1,32689.6,32719.9,
32750.0,32779.9,32809.6,32839.1,32868.4,32897.5,32926.4,32955.1,32983.6,33011.9,
33040.0,33067.9,33095.6,33123.1,33150.4,33177.5,33204.4,33231.1,33257.6,33283.9,
33310.0,33335.9,33361.6,33387.1,33412.4,33437.5,33462.4,33487.1,33511.6,33535.9,
33560.0,33583.9,33607.6,33631.1,33654.4,33677.5,33700.4,33723.1,33745.6,33767.9,
33790.0,33811.9,33833.6,33855.1,33876.4,33897.5,33918.4,33939.1,33959.6,33979.9,
34000.0,34019.9,34039.6,34059.1,34078.4,34097.5,34116.4,34135.1,34153.6,34171.9,
34190.0,34207.9,34225.6,34243.1,34260.4,34277.5,34294.4,34311.1,34327.6,34343.9,
34360.0,34375.9,34391.6,34407.1,34422.4,34437.5,34452.4,34467.1,34481.6,34495.9,
34510.0,34523.9,34537.6,34551.1,34564.4,34577.5,34590.4,34603.1,34615.6,34627.9,
34640.0,34651.9,34663.6,34675.1,34686.4,34697.5,34708.4,34719.1,34729.6,34739.9,
34750.0,34759.9,34769.6,34779.1,34788.4,34797.5,34806.4,34815.1,34823.6,34831.9,
34840.0,34847.9,34855.6,34863.1,34870.4,34877.5,34884.4,34891.1,34897.6,34903.9,
34910.0,34915.9,34921.6,34927.1,34932.4,34937.5,34942.4,34947.1,34951.6,34955.9,
34960.0,34963.9,34967.6,34971.1,34974.4,34977.5,34980.4,34983.1,34985.6,34987.9,
34990.0,34991.9,34993.6,34995.1,34996.4,34997.5,34998.4,34999.1,34999.6,34999.9,
35000,35199,35396,35591,35784,35975,36164,36351,36536,36719,
36900,37079,37256,37431,37604,37775,37944,38111,38276,38439,
38600,38759,38916,39071,39224,39375,39524,39671,39816,39959,
40100,40239,40376,40511,40644,40775,40904,41031,41156,41279,
41400,41519,41636,41751,41864,41975,42084,42191,42296,42399,
42500,42599,42696,42791,42884,42975,43064,43151,43236,43319,
43400,43479,43556,43631,43704,43775,43844,43911,43976,44039,
44100,44159,44216,44271,44324,44375,44424,44471,44516,44559,
44600,44639,44676,44711,44744,44775,44804,44831,44856,44879,
44900,44919,44936,44951,44964,44975,44984,44991,44996,44999,
45000,44999,44996,44991,44984,44975,44964,44951,44936,44919,
44900,44879,44856,44831,44804,44775,44744,44711,44676,44639,
44600,44559,44516,44471,44424,44375,44324,44271,44216,44159,
44100,44039,43976,43911,43844,43775,43704,43631,43556,43479,
43400,43319,43236,43151,43064,42975,42884,42791,42696,42599,
42500,42399,42296,42191,42084,41975,41864,41751,41636,41519,
41400,41279,41156,41031,40904,40775,40644,40511,40376,40239,
40100,39959,39816,39671,39524,39375,39224,39071,38916,38759,
38600,38439,38276,38111,37944,37775,37604,37431,37256,37079,
36900,36719,36536,36351,36164,35975,35784,35591,35396,35199,
35940.0,35938.8,35935.2,35929.2,35920.8,35910.0,35896.8,35881.2,35863.2,35842.8,
35820.0,35794.8,35767.2,35737.2,35704.8,35670.0,35632.8,35593.2,35551.2,35506.8,
35460.0,35410.8,35359.2,35305.2,35248.8,35190.0,35128.8,35065.2,34999.2,34930.8,
34860.0,34786.8,34711.2,34633.2,34552.8,34470.0,34384.8,34297.2,34207.2,34114.8,
34020.0,33922.8,33823.2,33721.2,33616.8,33510.0,33400.8,33289.2,33175.2,33058.8,
32940.0,32818.8,32695.2,32569.2,32440.8,32310.0,32176.8,32041.2,31903.2,31762.8,
31620.0,31474.8,31327.2,31177.2,31024.8,30870.0,30712.8,30553.2,30391.2,30226.8,
30060.0,29890.8,29719.2,29545.2,29368.8,29190.0,29008.8,28825.2,28639.2,28450.8,
28260.0,28066.8,27871.2,27673.2,27472.800000000003,27270.0,27064.8,26857.2,26647.2,26434.800000000003,
26220.0,26002.8,25783.2,25561.2,25336.800000000003,25110.0,24880.800000000003,24649.2,24415.2,24178.800000000003,
23940.0,23698.800000000003,23455.2,23209.2,22960.800000000003,22710.0,22456.800000000003,22201.199999999997,21943.2,21682.800000000003,
21420.0,21154.800000000003,20887.199999999997,20617.2,20344.800000000003,20070.0,19792.800000000003,19513.2,19231.2,18946.800000000003,
18660.0,18370.800000000003,18079.2,17785.2,17488.800000000003,17190.0,16888.800000000003,16585.2,16279.2,15970.800000000003,
15660.0,15346.800000000003,15031.2,14713.2,14392.800000000003,14070.0,13744.800000000003,13417.2,13087.2,12754.800000000003,
12420.0,12082.800000000003,11743.2,11401.2,11056.800000000003,10710.0,10360.800000000003,10009.2,9655.2,9298.800000000003,
8940.0,8578.800000000003,8215.2,7849.200000000001,7480.800000000003,7110.0,6736.800000000003,6361.200000000001,5983.200000000001,5602.800000000003,
5220.0,4834.800000000003,4447.200000000001,4057.2000000000007,3664.800000000003,3270.0,2872.800000000003,2473.199999999997,2071.2000000000044,1666.800000000003,
1260.0,850.8000000000029,439.1999999999971,25.200000000004366,-391.1999999999971,-810.0,-1231.199999999997,-1654.800000000003,-2080.7999999999956,-2509.199999999997,
-2940.0,-3373.199999999997,-3808.800000000003,-4246.799999999996,-4687.199999999997,-5130.0,-5575.199999999997,-6022.800000000003,-6472.799999999996,-6925.199999999997,
-7380.0,-7837.199999999997,-8296.799999999996,-8758.799999999996,-9223.199999999997,-9690.0,-10159.199999999997,-10630.799999999996,-11104.799999999996,-11581.199999999997};

float deri(float yn, float yn_1) {
    return (yn_1 - yn) / DELTA_T;
}

float newton(float x, float dy, float ddy) {
    return x - 1.1*dy / ddy;
}

int main() {
    int y_sz = sizeof(y) / sizeof(float);
    printf("y size: %d\n", y_sz);

    float *dy = (float *)malloc(sizeof(float) * (y_sz-1));
    float *ddy = (float *)malloc(sizeof(float) * (y_sz-2));
    memset(dy, 0, sizeof(float) * (y_sz-1));
    memset(ddy, 0, sizeof(float) * (y_sz-2));

    // for(int i=0;i<y_sz;i++) {printf("%.1f, ", y[i]);}
    printf("\n");
    for(int i=1;i<y_sz;i++) {
        dy[i-1] = deri(y[i-1], y[i]);
        printf("==== dy: %.2f\n", dy[i-1]);
        if(i > 2) {
            ddy[i-2] = deri(dy[i-2], dy[i-1]);
            // printf(">>>>> ddy: %.2f\n", ddy[i-2]);
        }
    }

    float ci;
    ci = START_N;

    for(int i=0;i<10;i++) {
        ci = newton(ci, dy[(int)roundf(ci)], ddy[(int)roundf(ci)]);
        printf("i: %.5f\n", ci);
        // ci = (int)roundf(temp);
    }


}



